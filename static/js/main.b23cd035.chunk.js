(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{19:function(t,n,e){},24:function(t,n,e){"use strict";e.r(n);var r=e(1),o=e(0),c=e.n(o),i=e(10),u=e.n(i),a=(e(19),e(2)),f=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},l=function(t,n,e){for(var r=e.x,o=e.y,c=0;c<t.tetromino.length;c+=1)for(var i=0;i<t.tetromino[c].length;i+=1)if(0!==t.tetromino[c][i]&&(!n[c+t.pos.y+o]||!n[c+t.pos.y+o][i+t.pos.x+r]||"clear"!==n[c+t.pos.y+o][i+t.pos.x+r][1]))return!0;return!1},s=e(3),d=e(4);function b(){var t=Object(s.a)(["\n\tdisplay: flex;\n\talign-items: flex-start;\n\tpadding: 40px;\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\n\taside {\n\t\twidth: 100%;\n\t\tmax-width: 200px;\n\t\tdisplay: block;\n\t\tpadding: 0 20px;\n\t}\n"]);return b=function(){return t},t}function p(){var t=Object(s.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground: #000;\n\toverflow: hidden;\n"]);return p=function(){return t},t}var x=d.b.div(p()),j=d.b.div(b());var O=e(8),h={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},v=function(){var t="IJLOSTZ",n=t[Math.floor(Math.random()*t.length)];return h[n]},g=function(t,n){var e=Object(o.useState)(f()),r=Object(a.a)(e,2),c=r[0],i=r[1],u=Object(o.useState)(0),l=Object(a.a)(u,2),s=l[0],d=l[1],b=Object(o.useState)(!1),p=Object(a.a)(b,2),x=p[0],j=p[1];return Object(o.useEffect)((function(){d(0);var e=function(e){var r=e.map((function(t){return t.map((function(t){return"clear"===t[1]?[0,"clear"]:t}))}));return t.tetromino.forEach((function(n,e){n.forEach((function(n,o){0!==n&&(r[e+t.pos.y][o+t.pos.x]=[n,"".concat(t.collided?"merged":"clear")])}))})),t.collided?(n(),function(t){return t.reduce((function(n,e){return-1===e.findIndex((function(t){return 0===t[0]}))?(d((function(t){return t+1})),j(!0),n.unshift(new Array(t[0].length).fill([0,"clear"])),n):(n.push(e),n)}),[])}(r)):r};i((function(t){return e(t)}))}),[t.collided,t.pos.x,t.pos.y,t.tetromino,n]),[c,i,s,x]};function m(){var t=Object(s.a)(["\n\twidth: auto;\n\tbackground: rgba(",", 0.7);\n\tborder: ",";\n\tborder-bottom-color: rgba(",", 0.1);\n\tborder-right-color: rgba(",", 1);\n\tborder-top-color: rgba(",", 1);\n\tborder-left-color: rgba(",", 0.3);\n\tanimation: ",";\n"]);return m=function(){return t},t}function y(){var t=Object(s.a)(["\n\tanimation: "," 3s ease-in infinite;\n"]);return y=function(){return t},t}function w(){var t=Object(s.a)(["\n\t0% {\n\t\tbox-shadow: 4px 4px 16px green;\n\t}\n\t50%{\n\t\tbox-shadow: 4px 4px 16px red;\n\t}\n\t100% {\n\t\tbox-shadow: 4px 4px 16px green;\n\t}\n"]);return w=function(){return t},t}var S=Object(d.c)(w()),k=Object(d.a)(y(),S),I=d.b.div(m(),(function(t){return t.color}),(function(t){return 0===t.type?"0px solid":"4px solid"}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),k),J=function(t){var n=t.type;return Object(r.jsx)(I,{type:n,color:h[n].color})},L=c.a.memo(J);function C(){var t=Object(s.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: repeat(\n\t\t",",\n\t\tcalc(25vw / ",")\n\t);\n\tgrid-template-columns: repeat(",", 1fr);\n\tgrid-gap: 1px;\n\tborder: 2px solid #333;\n\twidth: 100%;\n\tmax-width: 25vw;\n\tbackground: #111;\n"]);return C=function(){return t},t}var T=d.b.div(C(),(function(t){return t.height}),(function(t){return t.width}),(function(t){return t.width})),E=function(t){var n=t.stage;return Object(r.jsx)(T,{width:n[0].length,height:n.length,children:n.map((function(t){return t.map((function(t,n){return Object(r.jsx)(L,{type:t[0]},n)}))}))})};function Z(){var t=Object(s.a)(["\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin: 0 0 20px 0;\n\tpadding: 20px;\n\tborder: 4px solid #333;\n\tmin-height: 30px;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tcolor: ",";\n\tbackground: #000;\n"]);return Z=function(){return t},t}var A=d.b.div(Z(),(function(t){return t.gameOver?"red":"#999"})),F=function(t){var n=t.gameOver,e=t.text;return Object(r.jsx)(A,{gameOver:n,children:e})};function N(){var t=Object(s.a)(["\n\tbox-sizing: border-box;\n\tmargin: 0 0 20px 0;\n\tpadding: 20px;\n\tmin-height: 30px;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tborder: none;\n\tcolor: white;\n\tbackground: #333;\n"]);return N=function(){return t},t}var z=d.b.button(N()),B=function(t){var n=t.callback;return Object(r.jsx)(z,{onClick:n,children:"Start Game"})},D=function(){var t=Object(o.useState)(null),n=Object(a.a)(t,2),e=n[0],c=n[1],i=Object(o.useState)(!1),u=Object(a.a)(i,2),s=u[0],d=u[1],b=function(){var t=Object(o.useState)({pos:{x:0,y:0},tetromino:h[0].shape,collided:!1}),n=Object(a.a)(t,2),e=n[0],r=n[1],c=function(t,n){var e=t.map((function(n,e){return t.map((function(t){return t[e]}))}));return n>0?e.map((function(t){return t.reverse()})):e.reverse()},i=Object(o.useCallback)((function(){r({pos:{x:4,y:0},tetromino:v().shape,collided:!1})}),[]);return[e,function(t){var n=t.x,e=t.y,o=t.collided;r((function(t){return Object(O.a)(Object(O.a)({},t),{},{pos:{x:t.pos.x+=n,y:t.pos.y+=e},collided:o})}))},i,function(t,n){var o=JSON.parse(JSON.stringify(e));o.tetromino=c(o.tetromino,n);for(var i=o.pos.x,u=1;l(o,t,{x:0,y:0});)if(o.pos.x+=u,(u=-(u+(u>0?1:-1)))>o.tetromino[0].length)return c(o.tetromino,-n),void(o.pos.x=i);r(o)}]}(),p=Object(a.a)(b,4),m=p[0],y=p[1],w=p[2],S=p[3],k=g(m,w),I=Object(a.a)(k,3),J=I[0],L=I[1],C=function(t){var n=Object(o.useState)(0),e=Object(a.a)(n,2),r=e[0],c=e[1],i=Object(o.useState)(0),u=Object(a.a)(i,2),f=u[0],l=u[1],s=Object(o.useState)(1),d=Object(a.a)(s,2),b=d[0],p=d[1],x=Object(o.useCallback)((function(){var n=[40,100,300,1200];t>0&&(c((function(e){return e+n[t-1]*b})),l((function(n){return n+t})))}),[b,t]);return Object(o.useEffect)((function(){x()}),[x,t,r]),[r,c,f,l,b,p]}(I[2]),T=Object(a.a)(C,6),Z=T[0],A=T[1],N=T[2],z=T[3],D=T[4],G=T[5],K=function(t){l(m,J,{x:t,y:0})||y({x:t,y:0})},M=function(){N>10*D&&(G((function(t){return t++})),c(800/(D+1)+200)),l(m,J,{x:0,y:1})?(m.pos.y<1&&(d(!0),c(null)),y({x:0,y:0,collided:!0})):y({x:0,y:1,collided:!1})},P=function(t){var n=t.keyCode;s||(37===n?K(-1):39===n?K(1):40===n?(c(null),M()):38===n&&S(J,1))};return function(t,n){var e=Object(o.useRef)();Object(o.useEffect)((function(){e.current=t}),[t]),Object(o.useEffect)((function(){if(null!==n){var t=setInterval((function(){e.current()}),n);return function(){clearInterval(t)}}}),[n])}((function(){M()}),e),Object(r.jsx)(x,{role:"button",tabIndex:"0",onKeyDown:function(t){return P(t)},onKeyUp:function(t){return function(t){var n=t.keyCode;s||40===n&&c(800/(D+1)+200)}(t)},children:Object(r.jsxs)(j,{children:[Object(r.jsx)(E,{stage:J}),Object(r.jsxs)("aside",{children:[s?Object(r.jsx)(F,{gameOver:s,text:"Game Over"}):Object(r.jsxs)("div",{children:[Object(r.jsx)(F,{text:"Score: ".concat(Z)}),Object(r.jsx)(F,{text:"Rows: ".concat(N)}),Object(r.jsx)(F,{text:"Level: ".concat(D)})]}),Object(r.jsx)(B,{callback:function(){L(f()),c(800),w(),d(!1),A(0),z(0),G(1)}})]})]})})},G=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(D,{})})},K=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,25)).then((function(n){var e=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,i=n.getTTFB;e(t),r(t),o(t),c(t),i(t)}))};u.a.render(Object(r.jsx)(G,{}),document.getElementById("root")),K()}},[[24,1,2]]]);
//# sourceMappingURL=main.b23cd035.chunk.js.map